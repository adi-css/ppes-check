<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PPES Self-Check</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #a8c0ff, #fbc2eb);
      margin: 0;
      padding: 0;
      overflow-y: auto;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }
    body::-webkit-scrollbar {
      display: none;
    }
    header {
      background: rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(8px);
      text-align: center;
      padding: 1.2em;
      font-weight: 600;
      font-size: 1.3em;
      color: #2d2d2d;
      letter-spacing: 0.5px;
      border-bottom: 2px solid rgba(255, 255, 255, 0.3);
    }
    .container {
      max-width: 820px;
      margin: 2.5em auto;
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.15);
      padding: 2.5em;
      color: #333;
    }
    h2 {
      text-align: center;
      color: #2b2b2b;
      margin-top: 0;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
    }
    th, td {
      padding: 0.7em;
      text-align: left;
      font-size: 0.95em;
    }
    th {
      background: #f1f1f1;
      font-weight: 600;
    }
    tr:nth-child(even) {
      background: #fafafa;
    }
    .rating {
      display: flex;
      justify-content: center;
      gap: 0.4em;
    }
    .rating button {
      border: 2px solid #ccc;
      border-radius: 50%;
      width: 34px;
      height: 34px;
      background: white;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .rating button:hover {
      border-color: #7b61ff;
    }
    .rating button.active {
      background: #7b61ff;
      color: white;
      transform: scale(1.1);
      border-color: #7b61ff;
    }
    .buttons {
      text-align: center;
      margin-top: 2em;
    }
    .buttons button {
      background: #7b61ff;
      color: white;
      border: none;
      padding: 0.8em 1.6em;
      border-radius: 30px;
      margin: 0 0.6em;
      font-size: 1em;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.2s ease;
    }
    .buttons button:hover {
      background: #5e49cc;
      transform: translateY(-2px);
    }
    .result {
      margin-top: 2em;
      text-align: center;
      padding: 1.2em;
      border-radius: 15px;
      font-weight: 600;
      color: #333;
      display: none;
    }
    .low { background: #d4f8d4; }
    .mild { background: #fff5cc; }
    .high { background: #ffd6d6; }
    footer {
      text-align: center;
      font-size: 0.85em;
      color: #555;
      margin-top: 2.5em;
    }
  </style>
</head>
<body>
  <header>
    üß† Postpartum Psychotic Experiences Self-Check (PPES-Inspired)
  </header>

  <div class="container">
    <h2>Self-Reflection Survey</h2>
    <p><strong>Instructions:</strong> Over the past few weeks (since childbirth), how often have you experienced the following?<br>Rate each item from <b>0 = Never</b> to <b>4 = Always</b>.</p>
    <table id="survey">
      <tr><th>#</th><th>Statement</th><th>Rating</th></tr>
    </table>

    <div class="buttons">
      <button id="submitBtn">Submit</button>
      <button id="downloadBtn">Download Results</button>
      <button id="clearBtn">Clear</button>
    </div>

    <div id="result" class="result"></div>

    <footer>
      <p>This is not a diagnostic test. It‚Äôs for self-reflection and awareness only.<br>If you or someone you know has hallucinations, delusional thoughts, confusion, or thoughts of harm, seek professional or emergency help immediately.</p>
    </footer>
  </div>

  <script>
    const statements = [
      "I‚Äôve felt unusually confused or disoriented about time, place, or people.",
      "I‚Äôve noticed or heard things that others said they couldn‚Äôt see or hear.",
      "I‚Äôve felt that people or forces were trying to control my thoughts or actions.",
      "My thoughts have seemed jumbled, racing, or disconnected.",
      "I‚Äôve believed things others told me were unlikely or untrue.",
      "I‚Äôve felt extremely energized or invincible even with little sleep.",
      "I‚Äôve found it difficult to tell what‚Äôs real and what‚Äôs not.",
      "My emotions have shifted quickly from joy to fear or sadness without reason.",
      "I‚Äôve had intrusive thoughts about my baby that scared or disturbed me.",
      "I‚Äôve felt detached from my baby or unsure if the baby is mine.",
      "I‚Äôve had strong feelings of being watched, judged, or followed.",
      "I‚Äôve felt my mind going blank or unable to think clearly.",
      "I‚Äôve experienced sudden bursts of fear or panic without a clear reason.",
      "I‚Äôve said or done things that didn‚Äôt feel like ‚Äúme.‚Äù",
      "I‚Äôve struggled to recognize familiar people or surroundings."
    ];

    const table = document.getElementById("survey");

    statements.forEach((text, i) => {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${i + 1}</td>
        <td>${text}</td>
        <td class="rating">
          ${[0, 1, 2, 3, 4]
            .map(n => `<button data-q="${i}" data-v="${n}">${n}</button>`)
            .join("")}
        </td>
      `;
      table.appendChild(row);
    });

    const buttons = document.querySelectorAll(".rating button");
    buttons.forEach(btn => {
      btn.addEventListener("click", () => {
        const group = document.querySelectorAll(`button[data-q="${btn.dataset.q}"]`);
        group.forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
      });
    });

    document.getElementById("submitBtn").addEventListener("click", () => {
      let total = 0;
      let highest = 0;
      for (let i = 0; i < statements.length; i++) {
        const selected = document.querySelector(`button[data-q="${i}"].active`);
        if (selected) {
          const val = parseInt(selected.dataset.v);
          total += val;
          if (val > highest) highest = val;
        }
      }

      const resultDiv = document.getElementById("result");
      let feedback = "";

      if (total <= 8) {
        resultDiv.className = "result low";
        feedback = "Likely within typical range for postpartum adjustment, but still take care of your rest and emotional health.";
      } else if (total <= 20) {
        resultDiv.className = "result mild";
        feedback = "Mild or occasional unusual experiences ‚Äî consider sharing with a healthcare provider or counselor.";
      } else {
        resultDiv.className = "result high";
        feedback = "It‚Äôs important to seek professional help soon, as these experiences may signal early or developing postpartum psychosis or a related condition.";
      }

      if (highest >= 3)
        feedback += " <br><strong>Note:</strong> Any item rated ‚Äú3 = Often‚Äù or ‚Äú4 = Always‚Äù deserves professional attention.";

      resultDiv.innerHTML = `<h3>Your Score: ${total}</h3><p>${feedback}</p>`;
      resultDiv.style.display = "block";
    });

    document.getElementById("clearBtn").addEventListener("click", () => {
      document.querySelectorAll(".rating button").forEach(b => b.classList.remove("active"));
      document.getElementById("result").style.display = "none";
    });

    document.getElementById("downloadBtn").addEventListener("click", () => {
      const resultDiv = document.getElementById("result");
      const score = resultDiv.textContent || "No results yet.";
      const blob = new Blob([score], { type: "text/plain" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "PPES_SelfCheck_Result.txt";
      link.click();
    });
  </script>
</body>
</html>
